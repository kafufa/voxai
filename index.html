<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="VoxAI - Acceso a tu asistente de voz personal">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>VoxAI - Asistente de Voz</title>
    <link rel="stylesheet" href="styles.css">
    <!-- A√±ado fuentes de Google para mejorar la apariencia -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Icono para la pesta√±a del navegador -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <main>
        <div class="app-container">
            <header>
                <h1>VoxAI</h1>
                <p class="tagline">Tu asistente de voz inteligente</p>
            </header>

            <!-- Formulario de inicio de sesi√≥n -->
            <section id="login-container" class="container">
                <h2>Iniciar Sesi√≥n</h2>
                <form id="login-form" method="post">
                    <div class="form-group">
                        <label for="username">Usuario</label>
                        <input type="text" id="username" name="username" placeholder="Ingresa tu nombre de usuario" required autocomplete="username">
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Contrase√±a</label>
                        <div class="password-wrapper">
                            <input type="password" id="password" name="password" placeholder="Ingresa tu contrase√±a" required autocomplete="current-password">
                            <button type="button" id="toggle-password" aria-label="Mostrar contrase√±a" tabindex="0">
                                <span id="eye-icon">üëÅÔ∏è</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" id="login-btn" class="btn btn-primary">Ingresar</button>
                    </div>
                    
                    <div id="login-error" class="error-message" role="alert" aria-live="assertive"></div>
                </form>
            </section>

            <!-- Contenedor del asistente (inicialmente oculto) -->
            <section id="assistant-container" class="container hidden">
                <h2>Asistente de Voz</h2>
                <div class="assistant-content">
                    <div class="voice-controls">
                        <button id="start-btn" class="btn btn-action">Comenzar Reconocimiento de Voz</button>
                    </div>
                    <div class="response-area">
                        <p id="response" role="status" aria-live="polite"></p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 VoxAI - Todos los derechos reservados</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referencias a elementos del DOM
            const loginForm = document.getElementById('login-form');
            const loginContainer = document.getElementById('login-container');
            const assistantContainer = document.getElementById('assistant-container');
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const togglePasswordBtn = document.getElementById('toggle-password');
            const loginError = document.getElementById('login-error');
            
            // Usuarios y contrase√±as (en producci√≥n, esto deber√≠a estar en el servidor)
            const users = {
                "Marouan": "M@r0u@n!2024",
                "Ivan": "1v@n_Seguro99", 
                "Noa": "N0a$ClaveXyz"
            };
            
            // Funcionalidad para mostrar/ocultar contrase√±a
            togglePasswordBtn.addEventListener('click', () => {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                // Cambiar el icono seg√∫n el estado
                const eyeIcon = document.getElementById('eye-icon');
                eyeIcon.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üîí';
                
                // Actualizar el texto de accesibilidad
                togglePasswordBtn.setAttribute('aria-label', 
                    type === 'password' ? 'Mostrar contrase√±a' : 'Ocultar contrase√±a');
            });
            
            // Manejo del env√≠o del formulario
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevenir el env√≠o del formulario
                
                // Obtener y limpiar valores
                const username = usernameInput.value.trim();
                const password = passwordInput.value;
                
                // Validaci√≥n b√°sica
                if (!username || !password) {
                    showError('Por favor, completa todos los campos');
                    return;
                }
                
                // Verificar credenciales
                if (users[username] && users[username] === password) {
                    // Almacenar informaci√≥n de sesi√≥n (no almacenar contrase√±as)
                    sessionStorage.setItem('voxai_user', username);
                    
                    // Redirecci√≥n - mantenemos la funcionalidad original
                    window.location.href = "https://kafufa.github.io/voxai/apartados.html";
                } else {
                    // Mostrar error con animaci√≥n
                    showError('Usuario o contrase√±a incorrectos');
                    
                    // Limpiar campo de contrase√±a por seguridad
                    passwordInput.value = '';
                    passwordInput.focus();
                }
            });
            
            // Funci√≥n para mostrar mensajes de error
            function showError(message) {
                loginError.textContent = message;
                loginError.classList.add('show');
                
                // Ocultar despu√©s de 3 segundos
                setTimeout(() => {
                    loginError.classList.remove('show');
                }, 3000);
            }
            
            // Prevenir ataques de fuerza bruta limitando intentos
            let loginAttempts = 0;
            const MAX_ATTEMPTS = 5;
            
            // Interceptamos el env√≠o para controlar intentos
            loginForm.addEventListener('submit', (e) => {
                if (loginAttempts >= MAX_ATTEMPTS) {
                    e.preventDefault();
                    showError('Demasiados intentos fallidos. Intenta m√°s tarde.');
                    
                    // Deshabilitar el formulario temporalmente
                    const inputs = loginForm.querySelectorAll('input, button');
                    inputs.forEach(input => input.disabled = true);
                    
                    // Rehabilitar despu√©s de 2 minutos
                    setTimeout(() => {
                        inputs.forEach(input => input.disabled = false);
                        loginAttempts = 0;
                    }, 120000);
                }
            });
            
            // Escuchar eventos de tecla para mejorar la accesibilidad
            togglePasswordBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    togglePasswordBtn.click();
                }
            });
            
            // Recuperar sesi√≥n si existe
            const savedUser = sessionStorage.getItem('voxai_user');
            if (savedUser && users[savedUser]) {
                usernameInput.value = savedUser;
                passwordInput.focus();
            } else {
                usernameInput.focus();
            }
        });
    </script>
</body>
</html>
